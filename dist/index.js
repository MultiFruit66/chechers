!function(e){var _={};function a(c){if(_[c])return _[c].exports;var t=_[c]={i:c,l:!1,exports:{}};return e[c].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=_,a.d=function(e,_,c){a.o(e,_)||Object.defineProperty(e,_,{enumerable:!0,get:c})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,_){if(1&_&&(e=a(e)),8&_)return e;if(4&_&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&_&&"string"!=typeof e)for(var t in e)a.d(c,t,function(_){return e[_]}.bind(null,t));return c},a.n=function(e){var _=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(_,"a",_),_},a.o=function(e,_){return Object.prototype.hasOwnProperty.call(e,_)},a.p="",a(a.s=0)}([function(e,_,a){"use strict";a.r(_);var c=a(1),t=a(2);const i=document.getElementById("canvas"),r=i.getContext("2d");i.setAttribute("width",t.b),i.setAttribute("height",t.b);const o={app(){const e=new Image;e.src="./img/background.png",e.onload=()=>document.getElementById("app").style.opacity=1},clear(){r.clearRect(0,0,i.width,i.height)},board(){t.a.forEach(e=>{r.fillStyle="#000",r.fillRect(e.x,e.y,t.b/8,t.b/8)})},checker(e,_,a){if(r.beginPath(),r.arc(e,_,t.b/16,0,2*Math.PI),r.fill(),a){r.fillStyle="#ccc";const a=(a,c)=>{r.beginPath(),r.arc(e,_-t.b/128,t.b/32,.75*Math.PI,.25*Math.PI,!0),r.lineTo(a,_-t.b/c),r.fill()};a(e-t.b/32,40),a(e+t.b/32,40),a(e,30)}},checkers(){t.a.forEach(e=>{e.color&&(r.fillStyle=e.color,this.checker(e.x+t.b/16,e.y+t.b/16,e.isQueen))})},active(){t.a.forEach(e=>{e.hasMove&&(r.fillStyle=e.isActive?"#00f":"#09f",r.fillRect(e.x-t.b/160,e.y-t.b/160,t.b/7.3,t.b/7.3))})},update(){this.clear(),this.active(),this.board(),this.checkers()},finish(e){o.update(),setTimeout(()=>{alert(e),window.location.reload()},100)}};var n=o;n.app(),c.a.checkAllMoves(),n.update(),document.addEventListener("click",e=>{t.a.find(_=>c.a.isCursorInCell(e,_)&&_.hasMove)&&(t.c.mustBeAttack?c.a.attackChecker(e)?(c.a.checkChangingToQueen(),c.a.attacksForActive()||(c.a.nextPas(),c.a.checkAllAttacks()||c.a.checkAllMoves()||(c.a.nextPas(),c.a.checkAllMoves()?n.finish(`Winner is ${t.c.color}!!!`):n.finish("It's draw!")))):(c.a.makeActive(e),c.a.attacksForActive()):c.a.moveChecker(e)?(c.a.checkChangingToQueen(),c.a.nextPas(),c.a.checkAllAttacks()||c.a.checkAllMoves()||(c.a.nextPas(),c.a.checkAllMoves()?n.finish(`Winner is ${t.c.color}!!!`):n.finish("It's draw!"))):(c.a.checkAllMoves(),c.a.makeActive(e),c.a.movesForActive()),n.update())})},function(module,__webpack_exports__,__webpack_require__){"use strict";var _variables__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const rules={isCursorInCell(e,_){const a=e.offsetX,c=e.offsetY;return a>_.x&&a<_.x+_variables__WEBPACK_IMPORTED_MODULE_0__.b/8&&c>_.y&&c<_.y+_variables__WEBPACK_IMPORTED_MODULE_0__.b/8},checkAllMoves(){const e=_variables__WEBPACK_IMPORTED_MODULE_0__.c.count%2?1:-1;let _=!1;return _variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(a=>{a.hasMove=!1,a.lines.forEach(c=>{a.color===_variables__WEBPACK_IMPORTED_MODULE_0__.c.color&&c[c.indexOf(a)+e]&&!c[c.indexOf(a)+e].color?(a.hasMove=!0,_=!0):a.color===_variables__WEBPACK_IMPORTED_MODULE_0__.c.color&&a.isQueen&&c[c.indexOf(a)-e]&&!c[c.indexOf(a)-e].color&&(a.hasMove=!0,_=!0)})}),_},makeActive(e){_variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(_=>{this.isCursorInCell(e,_)&&_.hasMove&&(_variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(e=>e.isActive=!1),_.isActive=!0)})},movesForActive(){const e=_variables__WEBPACK_IMPORTED_MODULE_0__.c.count%2?1:-1,_=_variables__WEBPACK_IMPORTED_MODULE_0__.a.find(e=>e.isActive);_variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(e=>{e.color||(e.hasMove=!1)}),_.lines.forEach(a=>{if(a[a.indexOf(_)+e]&&!a[a.indexOf(_)+e].color&&(a[a.indexOf(_)+e].hasMove=!0),_.isQueen){const e=a.indexOf(_);for(let _=e+1;_<a.length;++_)a[_].color?_=a.length:a[_].hasMove=!0;for(let _=e-1;_>=0;--_)a[_].color?_=-1:a[_].hasMove=!0}})},moveChecker(e){let _=!1;return _variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(a=>{if(this.isCursorInCell(e,a)&&a.hasMove&&!a.color){const e=_variables__WEBPACK_IMPORTED_MODULE_0__.a.find(e=>e.isActive);a.color=e.color,a.queen=e.queen,e.color=!1,e.queen=!1,_=!0}}),_},nextPas(){_variables__WEBPACK_IMPORTED_MODULE_0__.c.count+=1,_variables__WEBPACK_IMPORTED_MODULE_0__.c.color=_variables__WEBPACK_IMPORTED_MODULE_0__.c.count%2?"red":"green",_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy=_variables__WEBPACK_IMPORTED_MODULE_0__.c.count%2?"green":"red"},checkAllAttacks:()=>(_variables__WEBPACK_IMPORTED_MODULE_0__.c.mustBeAttack=!1,_variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(e=>{e.lines.forEach(_=>{const a=_.indexOf(e);if(e.color!==_variables__WEBPACK_IMPORTED_MODULE_0__.c.color||e.isQueen||(_[a+2]&&_[a+1].color===_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy&&!_[a+2].color||_[a-2]&&_[a-1].color===_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy&&!_[a-2].color)&&(_variables__WEBPACK_IMPORTED_MODULE_0__.c.mustBeAttack||_variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(e=>e.hasMove=!1),e.hasMove=!0,_variables__WEBPACK_IMPORTED_MODULE_0__.c.mustBeAttack=!0),e.color===_variables__WEBPACK_IMPORTED_MODULE_0__.c.color&&e.isQueen){const c=c=>{let t=_.map(e=>e.color).join(" ").match(c);t&&((t=t[0].trim().split(" ").map(e=>"false"!==e&&e)).every((e,c)=>_[c+a]&&e===_[c+a].color)||t.reverse().every((e,c)=>_[a-c]&&e===_[a-c].color))&&(_variables__WEBPACK_IMPORTED_MODULE_0__.c.mustBeAttack||_variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(e=>e.hasMove=!1),e.hasMove=!0,_variables__WEBPACK_IMPORTED_MODULE_0__.c.mustBeAttack=!0)};c(new RegExp(`(${_variables__WEBPACK_IMPORTED_MODULE_0__.c.color})\\s(false\\s)*${_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy}\\s(false\\s?)+`,"g")),c(new RegExp(`(false\\s)+${_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy}\\s(false\\s)*${_variables__WEBPACK_IMPORTED_MODULE_0__.c.color}\\s?`,"g"))}})}),_variables__WEBPACK_IMPORTED_MODULE_0__.c.mustBeAttack),attacksForActive(){const active=_variables__WEBPACK_IMPORTED_MODULE_0__.a.find(e=>e.isActive);let areAttacks=!1;return _variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(e=>{e.color||(e.hasMove=!1)}),active.isQueen?active.lines.forEach(line=>{const findQueenAttacks=(regexp,exp)=>{let attackLine=line.map(e=>e.color).join(" ").match(regexp);if(attackLine&&(attackLine=attackLine[0].trim().split(" ").map(e=>"false"!==e&&e),attackLine.every((e,_)=>line[_+line.indexOf(active)]&&e===line[_+line.indexOf(active)].color)||attackLine.reverse().every((e,_)=>line[line.indexOf(active)-_]&&e===line[line.indexOf(active)-_].color)))for(let i=attackLine.length-1;i>=0;--i)line[eval(exp)].color?i=-1:(line[eval(exp)].hasMove=!0,areAttacks=!0)};findQueenAttacks(new RegExp(`(${_variables__WEBPACK_IMPORTED_MODULE_0__.c.color})\\s(false\\s)*${_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy}\\s(false\\s?)+`,"g"),"i + line.indexOf(active)"),findQueenAttacks(new RegExp(`(false\\s)+${_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy}\\s(false\\s)*${_variables__WEBPACK_IMPORTED_MODULE_0__.c.color}\\s?`,"g"),"line.indexOf(active) - i")}):active.lines.forEach(e=>{e[e.indexOf(active)+2]&&e[e.indexOf(active)+1].color===_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy&&!e[e.indexOf(active)+2].color&&(e[e.indexOf(active)+2].hasMove=!0,areAttacks=!0),e[e.indexOf(active)-2]&&e[e.indexOf(active)-1].color===_variables__WEBPACK_IMPORTED_MODULE_0__.c.enemy&&!e[e.indexOf(active)-2].color&&(e[e.indexOf(active)-2].hasMove=!0,areAttacks=!0)}),areAttacks},attackChecker(e){let _=!1;return _variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach(a=>{if(this.isCursorInCell(e,a)&&a.hasMove&&!a.color){const e=_variables__WEBPACK_IMPORTED_MODULE_0__.a.find(e=>e.isActive),c=e.lines.find(e=>~e.indexOf(a)),t=[c.indexOf(e),c.indexOf(a)].sort();t[0]+=1;const i=c.slice(...t).find(e=>e.color);a.color=e.color,a.isQueen=e.isQueen,a.isActive=!0,i.color=!1,i.isQueen=!1,e.color=!1,e.isQueen=!1,e.isActive=!1,_=!0}}),_},checkChangingToQueen(){_variables__WEBPACK_IMPORTED_MODULE_0__.a.forEach((e,_)=>{_<4&&"green"===e.color?e.isQueen=!0:_>27&&"red"===e.color&&(e.isQueen=!0)})}};__webpack_exports__.a=rules},function(e,_,a){"use strict";a.d(_,"b",(function(){return c})),a.d(_,"c",(function(){return t})),a.d(_,"a",(function(){return i}));const c=window.innerHeight<window.innerWidth?.9*window.innerHeight:.9*window.innerWidth,t={count:0,color:"green",enemy:"red",mustBeAttack:!1},i=[];(()=>{let e,_,a;for(let t=0;t<32;++t){switch(e=t%8>=4&&t%8<8?t%4*c/4+c/8:t%4*c/4,_=c*(parseInt(t/4)/8),!0){case t<12:a="red";break;case t>=20:a="green";break;default:a=!1}i[t]={x:e,y:_,color:a,lines:[],isQueen:!1,hasMove:!1,isActive:!1}}const t=[];[[24,28],[16,20,25,29],[8,12,17,21,26,30],[0,4,9,13,18,22,27,31],[1,5,10,14,19,23],[2,6,11,15],[3,7],[1,4,8],[2,5,9,12,16],[3,6,10,13,17,20,24],[7,11,14,18,21,25,28],[15,19,22,26,29],[23,27,30]].forEach(e=>t.push(e.map(e=>i[e]))),t.forEach(e=>{e.forEach(_=>{_.lines.push(e)})})})()}]);